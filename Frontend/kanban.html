<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="https://code.jquery.com/ui/1.11.2/jquery-ui.js"></script> 
  <script src="script.js"></script>
  <title>Document</title>
</head>
<body>
<div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8 container" >
<!-- This example requires Tailwind CSS v2.0+ -->
  <div class="lg:flex lg:items-center lg:justify-between mt-5">
    <div class="flex-1 min-w-0">
      <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate">
          Kanban Board
      </h2>
    </div>
    <div class="mt-5 flex">
      <span class="">
        <button type="button" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mr-50" onclick="addTask()">
          <!-- Heroicon name: solid/check -->
          <svg class="-ml-1 mr-2 h-5 w-5 text-white-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
          </svg>
          Create
        </button>
      </span>
    </div>
  </div>
  <main class="p-3 flex mt-10">
    <div class="mr-2 ml-2 p-3 w-80 bg-gray-100 rounded col min-h-full">
      <h3 class="text-sm font-medium text-gray-900">Todo</h3>
      <div class="cards min-h-full	">
      <ul class="mt-2 list-none	" id="todo" class="draggable min-h-full	">
      </ul>
    </div>
    </div>
    <div class="mr-2 ml-2 p-3 w-80 bg-gray-100 rounded col min-h-full" >
      <h3 class="text-sm font-medium text-gray-900">In Progress</h3>
      <div class="cards min-h-full">
        <ul class="mt-2" id="progress" class="draggable min-h-full">
        </ul>
      </div>
    </div>
    <div class="mr-2 ml-2 p-3 w-80 bg-gray-100 rounded col min-h-full">
      <h3 class="text-sm font-medium text-gray-900">Finished</h3>
      <div class="cards min-h-full ">
        <ul class="mt-2 min-h-full" id="done">
        </ul>
      </div>
    </div>
  </main>
</div>
<script>
  var obj = '#todo,#progress,#done',
  timer;

  function loadMore(){
    $('.loadMore').addClass('animateLoadMore');
    setTimeout(function(){
      $('.loadMore').removeClass('animateLoadMore').hide();
      $('.hide').show().removeClass('hide');
      $(obj).sortable('refresh');
    }, 600)
  }

  $(obj + ', .cards').sortable({
    connectWith: '.draggable,.cards',
    placeholder: 'highlight',
    opacity: 0.5,
    revert: true,
    start(event,ui){
      $(obj).sortable('refresh');
    },
    over(event,ui){
      $(this).parent().find('.cards').addClass('columnHover');
    },
    out(event,ui){
      $(this).parent().find('.cards').removeClass('columnHover');
      console.log("out");
    }
  }).disableSelection();

  $('.loadMore').droppable({
  hoverClass: 'hover',
  over(event, ui){
    console.log('Over!')
    if (!timer) {
      timer = window.setTimeout(function() {
        timer = null;
        loadMore();
      }, 300);
    }
  },
  out(event, ui){
    window.clearTimeout(timer);
    timer = null;
    }
  });

  $('.hide').hide();

  $('.loadMore').click(function(){
    $('.hide').show().removeClass('hide');
    $(this).hide();
  }); 
</script>
</body>

</html>

<style>
  .highlight{
    min-height: 18px;
    border: 1px dashed #9E9E9E !important;
    background-color: transparent !important;
    margin-top: 5px;
    border-radius: 5px;
    height: 100px;
  }

  ul, li {
    list-style-type: none;
  }
</style>
